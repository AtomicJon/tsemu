!function(){const e=10,t={Z:null,N:null,H:null,C:null};function s(e,t,s=!1){return 16==((15&e)+(15&t)+(s?1:0)&16)}function r(e,t){const r=e.readOperand(t[0]),n=e.readOperand(t[1]),a=r+n+(e.flagC?1:0),i=255&a;return e.writeToOperand(t[0],i),{Z:0===i,N:!1,H:s(r,n,e.flagC),C:256==(256&a)}}var n,a,i,c;function o(e,t){const r=e.readOperand(t[0]),a=e.readOperand(t[1]),i=r+a;if(t[0].type===n.Register16&&8!==t[0].target){const s=65535&i;return e.writeToOperand(t[0],s),{Z:null,N:!1,H:4096==((255&r)+(255&a)&4096),C:65536==(65536&i)}}const c=255&i;return e.writeToOperand(t[0],c),{Z:0===c,N:!1,H:s(r,a),C:256==(256&i)}}function y(e,t){const s=e.readOperand(t[0])&e.readOperand(t[1]);return e.writeToOperand(t[0],s),{Z:0===s,N:!1,H:!0,C:!1}}function g(e,s){const r=e.readOperand(s[0]);return e.SP-=2,e.write16(e.SP,r),t}function p(e,t,s=!1){return 16==((15&e)-(15&t)-(s?1:0)&16)}function m(e,t){const s=e.readOperand(t[0]),r=e.readOperand(t[1]),n=s-r;return{Z:0===n,N:!0,H:p(s,r),C:n<0}}function d(e,s){const r=e.readOperand(s[0]),a=r-1,i=s[0].type!==n.Register16||s[0].isAddress?255&a:65535&a;return e.writeToOperand(s[0],i),s[0].type!==n.Register16||s[0].isAddress?{Z:0===a,N:!0,H:p(r,1),C:null}:t}function l(e){return e.interruptsEnabled=!0,t}function R(e,r){const a=e.readOperand(r[0]),i=a+1,c=r[0].type!==n.Register16||r[0].isAddress?255&i:65535&i;return e.writeToOperand(r[0],c),r[0].type!==n.Register16||r[0].isAddress?{Z:0===c,N:!1,H:s(a,1),C:null}:t}function u(e,s){const r=e.readOperand(s[0]);return e.PC=r,t}function b(e,s){return e.writeToOperand(s[0],e.readOperand(s[1])),t}function h(){return t}function L(e,t){const s=e.readOperand(t[0])|e.readOperand(t[1]);return e.writeToOperand(t[0],s),{Z:0===s,N:!1,H:!1,C:!1}}function C(e,s){const r=e.read16(e.SP);return e.SP+=2,e.writeToOperand(s[0],r),t}function E(t){return C(t,[{type:n.Register16,target:e}])}function S(e,t){let s=e.readOperand(t[0])<<1;e.flagC&&(s|=1);const r=255&s;return e.writeToOperand(t[0],r),{Z:0===r,N:!1,H:!1,C:256==(256&s)}}function A(e,t){let s=e.readOperand(t[0])<<1;const r=256==(256&s);r&&(s|=1);const n=255&s;return e.writeToOperand(t[0],n),{Z:0===n,N:!1,H:!1,C:r}}function T(e,t){const s=e.readOperand(t[0]);let r=s>>1;e.flagC&&(r|=128);const n=255&r;return e.writeToOperand(t[0],n),{Z:0===n,N:!1,H:!1,C:1==(1&s)}}function D(e,t){const s=e.readOperand(t[0]);let r=s>>1;const n=1==(1&s);n&&(r|=128);const a=255&r;return e.writeToOperand(t[0],a),{Z:0===a,N:!1,H:!1,C:n}}function f(e,t){e.SP-=2,e.write16(e.SP,e.PC),e.PC=t}function V(e,t){const s=e.readOperand(t[0]),r=e.readOperand(t[1]),n=s-r-(e.flagC?1:0),a=255&n;return e.writeToOperand(t[0],a),{Z:0===a,N:!0,H:p(s,r,e.flagC),C:n<0}}function H(e,t){const s=e.readOperand(t[0]),r=e.readOperand(t[1]),n=s-r,a=255&n;return e.writeToOperand(t[0],a),{Z:0===a,N:!0,H:p(s,r),C:n<0}}function B(e,t){const s=e.readOperand(t[0])^e.readOperand(t[1]);return e.writeToOperand(t[0],s),{Z:0===s,N:!1,H:!1,C:!1}}(a=n||(n={})).Register8="Register8",a.Register16="Register16",a.Immediate8="Immediate8",a.Immediate8Signed="Immediate8Signed",a.Immediate16="Immediate16",a.Value="Value",(c=i||(i={})).Increment="Increment",c.Decrement="Decrement";var I={0:{action:h,operands:[],mnemonic:"NOP",bytes:1,cycles:4},1:{action:b,operands:[{type:n.Register16,target:2},{type:n.Immediate16}],mnemonic:"LD BC, d16",bytes:3,cycles:12},2:{action:b,operands:[{type:n.Register16,target:2,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LD (BC), A",bytes:1,cycles:8},3:{action:R,operands:[{type:n.Register16,target:2}],mnemonic:"INC BC",bytes:1,cycles:8},4:{action:R,operands:[{type:n.Register8,target:2}],mnemonic:"INC B",bytes:1,cycles:8},5:{action:d,operands:[{type:n.Register8,target:2}],mnemonic:"DEC B",bytes:1,cycles:4},6:{action:b,operands:[{type:n.Register8,target:2},{type:n.Immediate8}],mnemonic:"LD B, d8",bytes:2,cycles:8},7:{action:function(e){return{Z:!1,N:!1,H:!1,C:A(e,[{type:n.Register8,target:0}]).C}},mnemonic:"RLCA",operands:[],bytes:1,cycles:4},8:{action:b,operands:[{type:n.Immediate16,isAddress:!0},{type:n.Register16,target:8}],mnemonic:"LD (a16), SP",bytes:3,cycles:20},9:{action:o,operands:[{type:n.Register16,target:6},{type:n.Register16,target:2}],mnemonic:"ADD HL, BC",bytes:1,cycles:8},10:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register16,target:2,isAddress:!0}],mnemonic:"LD A, (BC)",bytes:1,cycles:4},11:{action:d,operands:[{type:n.Register16,target:2}],mnemonic:"DEC BC",bytes:1,cycles:8},12:{action:R,operands:[{type:n.Register8,target:3}],mnemonic:"INC C",bytes:1,cycles:4},13:{action:d,operands:[{type:n.Register8,target:3}],mnemonic:"DEC C",bytes:1,cycles:4},14:{action:b,operands:[{type:n.Register8,target:3},{type:n.Immediate8}],mnemonic:"LD C, d8",bytes:2,cycles:8},15:{action:function(e){return{Z:!1,N:!1,H:!1,C:D(e,[{type:n.Register8,target:0}]).C}},operands:[],mnemonic:"RRCA",bytes:1,cycles:4},16:{action:h,operands:[],mnemonic:"STOP d8",bytes:2,cycles:4},17:{action:b,operands:[{type:n.Register16,target:4},{type:n.Immediate16}],mnemonic:"LD DE, d16",bytes:3,cycles:12},18:{action:b,operands:[{type:n.Register16,target:4,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LD (DE), A",bytes:1,cycles:8},19:{action:R,operands:[{type:n.Register16,target:4}],mnemonic:"INC DE",bytes:1,cycles:8},20:{action:R,operands:[{type:n.Register8,target:4}],mnemonic:"INC D",bytes:1,cycles:8},21:{action:d,operands:[{type:n.Register8,target:4}],mnemonic:"DEC D",bytes:1,cycles:4},22:{action:b,operands:[{type:n.Register8,target:4},{type:n.Immediate8}],mnemonic:"LD D, d8",bytes:2,cycles:8},23:{action:function(e){return{Z:!1,N:!1,H:!1,C:S(e,[{type:n.Register8,target:0}]).C}},operands:[],mnemonic:"RLA",bytes:1,cycles:4},24:{action:function(e,s){const r=e.readOperand(s[0]);return e.PC+=r,t},operands:[{type:n.Immediate8Signed}],mnemonic:"JR n",bytes:2,cycles:12},25:{action:o,operands:[{type:n.Register16,target:6},{type:n.Register16,target:4}],mnemonic:"ADD HL, DE",bytes:1,cycles:8},26:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register16,target:4,isAddress:!0}],mnemonic:"LD A, (DE)",bytes:1,cycles:4},27:{action:d,operands:[{type:n.Register16,target:4}],mnemonic:"DEC DE",bytes:1,cycles:8},28:{action:R,operands:[{type:n.Register8,target:5}],mnemonic:"INC E",bytes:1,cycles:8},29:{action:d,operands:[{type:n.Register8,target:5}],mnemonic:"DEC E",bytes:1,cycles:4},30:{action:b,operands:[{type:n.Register8,target:5},{type:n.Immediate8}],mnemonic:"LD E, d8",bytes:2,cycles:8},31:{action:function(e){return{Z:!1,N:!1,H:!1,C:T(e,[{type:n.Register8,target:0}]).C}},operands:[],mnemonic:"RRA",bytes:1,cycles:4},32:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagZ||(e.PC+=r),t},operands:[{type:n.Immediate8Signed}],mnemonic:"JR NZ, R8",bytes:2,cycles:8},33:{action:b,operands:[{type:n.Register16,target:6},{type:n.Immediate16}],mnemonic:"LD HL, d16",bytes:3,cycles:12},34:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0,modifier:i.Increment},{type:n.Register8,target:0}],mnemonic:"LD (HL)+, A",bytes:1,cycles:8},35:{action:R,operands:[{type:n.Register16,target:6}],mnemonic:"INC HL",bytes:1,cycles:8},36:{action:R,operands:[{type:n.Register8,target:6}],mnemonic:"INC H",bytes:1,cycles:8},37:{action:d,operands:[{type:n.Register8,target:6}],mnemonic:"DEC H",bytes:1,cycles:4},38:{action:b,operands:[{type:n.Register8,target:6},{type:n.Immediate8}],mnemonic:"LD H, d8",bytes:2,cycles:8},39:{action:function(e){let t=e.A,s=null;e.flagN?e.flagH&&(e.flagH&&(t-=6),e.flagC&&(t-=96)):((e.flagH||(15&e.A)>9)&&(t+=6),(e.flagC||e.A>153)&&(t+=96,s=!0));const r=255&t;return e.A=r,{Z:0===r,N:null,H:!1,C:s}},operands:[],mnemonic:"DAA",bytes:1,cycles:4},40:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagZ&&(e.PC+=r),t},operands:[{type:n.Immediate8Signed}],mnemonic:"JR Z, R8",bytes:2,cycles:8},41:{action:o,operands:[{type:n.Register16,target:6},{type:n.Register16,target:6}],mnemonic:"ADD HL, HL",bytes:1,cycles:8},42:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0,modifier:i.Increment}],mnemonic:"LD A, (HL+)",bytes:1,cycles:8},43:{action:d,operands:[{type:n.Register16,target:6}],mnemonic:"DEC HL",bytes:1,cycles:8},44:{action:R,operands:[{type:n.Register8,target:7}],mnemonic:"INC L",bytes:1,cycles:8},45:{action:d,operands:[{type:n.Register8,target:7}],mnemonic:"DEC L",bytes:1,cycles:4},46:{action:b,operands:[{type:n.Register8,target:7},{type:n.Immediate8}],mnemonic:"LD L, d8",bytes:2,cycles:8},47:{action:function(e){return e.A=255^e.A,{Z:null,N:!0,H:!0,C:null}},operands:[],mnemonic:"CPL",bytes:1,cycles:4},48:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagC||(e.PC+=r),t},operands:[{type:n.Immediate8Signed}],mnemonic:"JR NC, R8",bytes:2,cycles:8},49:{action:b,operands:[{type:n.Register16,target:8},{type:n.Immediate16}],mnemonic:"LD SP, d16",bytes:3,cycles:12},50:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0,modifier:i.Decrement},{type:n.Register8,target:0}],mnemonic:"LD (HLD), A",bytes:1,cycles:8},51:{action:R,operands:[{type:n.Register16,target:8}],mnemonic:"INC SP",bytes:1,cycles:8},52:{action:R,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"INC (HL)",bytes:1,cycles:12},53:{action:d,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"DEC (HL)",bytes:1,cycles:12},54:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Immediate8}],mnemonic:"LD (HL), d8",bytes:2,cycles:12},55:{action:function(){return{Z:null,N:!1,H:!1,C:!0}},operands:[],mnemonic:"SCF",bytes:1,cycles:4},56:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagC&&(e.PC+=r),t},operands:[{type:n.Immediate8Signed}],mnemonic:"JR C, R8",bytes:2,cycles:8},57:{action:o,operands:[{type:n.Register16,target:6},{type:n.Register16,target:8}],mnemonic:"ADD HL, SP",bytes:1,cycles:8},58:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0,modifier:i.Decrement}],mnemonic:"LD A, (HL-)",bytes:1,cycles:8},59:{action:d,operands:[{type:n.Register16,target:8}],mnemonic:"DEC SP",bytes:1,cycles:8},60:{action:R,operands:[{type:n.Register8,target:0}],mnemonic:"INC A",bytes:1,cycles:8},61:{action:d,operands:[{type:n.Register8,target:0}],mnemonic:"DEC A",bytes:1,cycles:4},62:{action:b,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"LD A, d8",bytes:1,cycles:8},63:{action:function(e){return{Z:null,N:!1,H:!1,C:!e.flagC}},operands:[],mnemonic:"CCF",bytes:1,cycles:4},64:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:2}],mnemonic:"LD B, B",bytes:1,cycles:4},65:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:3}],mnemonic:"LD B, C",bytes:1,cycles:4},66:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:4}],mnemonic:"LD B, D",bytes:1,cycles:4},67:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:5}],mnemonic:"LD B, E",bytes:1,cycles:4},68:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:6}],mnemonic:"LD B, H",bytes:1,cycles:4},69:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:7}],mnemonic:"LD B, L",bytes:1,cycles:4},70:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD B, (HL)",bytes:1,cycles:4},71:{action:b,operands:[{type:n.Register8,target:2},{type:n.Register8,target:0}],mnemonic:"LD B, A",bytes:1,cycles:4},72:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:2}],mnemonic:"LD C, B",bytes:1,cycles:4},73:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:3}],mnemonic:"LD C, C",bytes:1,cycles:4},74:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:4}],mnemonic:"LD C, D",bytes:1,cycles:4},75:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:5}],mnemonic:"LD C, E",bytes:1,cycles:4},76:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:6}],mnemonic:"LD C, H",bytes:1,cycles:4},77:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:7}],mnemonic:"LD C, L",bytes:1,cycles:4},78:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD C, (HL)",bytes:1,cycles:4},79:{action:b,operands:[{type:n.Register8,target:3},{type:n.Register8,target:0}],mnemonic:"LD C, A",bytes:1,cycles:4},80:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:2}],mnemonic:"LD D, B",bytes:1,cycles:4},81:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:3}],mnemonic:"LD D, C",bytes:1,cycles:4},82:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:4}],mnemonic:"LD D, D",bytes:1,cycles:4},83:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:5}],mnemonic:"LD D, E",bytes:1,cycles:4},84:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:6}],mnemonic:"LD D, H",bytes:1,cycles:4},85:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:7}],mnemonic:"LD D, L",bytes:1,cycles:4},86:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD D, (HL)",bytes:1,cycles:4},87:{action:b,operands:[{type:n.Register8,target:4},{type:n.Register8,target:0}],mnemonic:"LD D, A",bytes:1,cycles:4},88:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:2}],mnemonic:"LD E, B",bytes:1,cycles:4},89:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:3}],mnemonic:"LD E, C",bytes:1,cycles:4},90:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:4}],mnemonic:"LD E, D",bytes:1,cycles:4},91:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:5}],mnemonic:"LD E, E",bytes:1,cycles:4},92:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:6}],mnemonic:"LD E, H",bytes:1,cycles:4},93:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:7}],mnemonic:"LD E, L",bytes:1,cycles:4},94:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD E, (HL)",bytes:1,cycles:8},95:{action:b,operands:[{type:n.Register8,target:5},{type:n.Register8,target:0}],mnemonic:"LD E, A",bytes:1,cycles:4},96:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:2}],mnemonic:"LD H, B",bytes:1,cycles:4},97:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:3}],mnemonic:"LD H, C",bytes:1,cycles:4},98:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:4}],mnemonic:"LD H, D",bytes:1,cycles:4},99:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:5}],mnemonic:"LD H, E",bytes:1,cycles:4},100:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:6}],mnemonic:"LD H, H",bytes:1,cycles:4},101:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:7}],mnemonic:"LD H, L",bytes:1,cycles:4},102:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD H, (HL)",bytes:1,cycles:8},103:{action:b,operands:[{type:n.Register8,target:6},{type:n.Register8,target:0}],mnemonic:"LD H, A",bytes:1,cycles:4},104:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:2}],mnemonic:"LD L, B",bytes:1,cycles:4},105:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:3}],mnemonic:"LD L, C",bytes:1,cycles:4},106:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:4}],mnemonic:"LD L, D",bytes:1,cycles:4},107:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:5}],mnemonic:"LD L, E",bytes:1,cycles:4},108:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:6}],mnemonic:"LD L, H",bytes:1,cycles:4},109:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:7}],mnemonic:"LD L, L",bytes:1,cycles:4},110:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD L, (HL)",bytes:1,cycles:8},111:{action:b,operands:[{type:n.Register8,target:7},{type:n.Register8,target:0}],mnemonic:"LD L, A",bytes:1,cycles:4},112:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:2}],mnemonic:"LD (HL), B",bytes:1,cycles:4},113:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:3}],mnemonic:"LD (HL), C",bytes:1,cycles:4},114:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:4}],mnemonic:"LD (HL), D",bytes:1,cycles:4},115:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:5}],mnemonic:"LD (HL), E",bytes:1,cycles:4},116:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:6}],mnemonic:"LD (HL), H",bytes:1,cycles:4},117:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:7}],mnemonic:"LD (HL), L",bytes:1,cycles:4},118:{action:h,operands:[],mnemonic:"HALT",bytes:1,cycles:4},119:{action:b,operands:[{type:n.Register16,target:6,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LD (HL), A",bytes:1,cycles:8},120:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"LD A, B",bytes:1,cycles:4},121:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"LD A, C",bytes:1,cycles:4},122:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"LD A, D",bytes:1,cycles:4},123:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"LD A, E",bytes:1,cycles:4},124:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"LD A, H",bytes:1,cycles:4},125:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"LD A, L",bytes:1,cycles:4},126:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"LD A, (HL)",bytes:1,cycles:4},127:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"LD A, A",bytes:1,cycles:4},128:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"ADD A, B",bytes:1,cycles:4},129:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"ADD A, C",bytes:1,cycles:4},130:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"ADD A, D",bytes:1,cycles:4},131:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"ADD A, E",bytes:1,cycles:4},132:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"ADD A, H",bytes:1,cycles:4},133:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"ADD A, L",bytes:1,cycles:4},134:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"ADD A, (HL)",bytes:1,cycles:8},135:{action:o,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"ADD A, A",bytes:1,cycles:4},136:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"ADC A, B",bytes:1,cycles:4},137:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"ADC A, C",bytes:1,cycles:4},138:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"ADC A, D",bytes:1,cycles:4},139:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"ADC A, E",bytes:1,cycles:4},140:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"ADC A, H",bytes:1,cycles:4},141:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"ADC A, L",bytes:1,cycles:4},142:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"ADC A, (HL)",bytes:1,cycles:8},143:{action:r,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"ADC A, A",bytes:1,cycles:4},144:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"SUB B",bytes:1,cycles:4},145:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"SUB C",bytes:1,cycles:4},146:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"SUB D",bytes:1,cycles:4},147:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"SUB E",bytes:1,cycles:4},148:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"SUB H",bytes:1,cycles:4},149:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"SUB L",bytes:1,cycles:4},150:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SUB (HL)",bytes:1,cycles:8},151:{action:H,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"SUB A",bytes:1,cycles:4},152:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"SBC A, B",bytes:1,cycles:4},153:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"SBC A, C",bytes:1,cycles:4},154:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"SBC A, D",bytes:1,cycles:4},155:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"SBC A, E",bytes:1,cycles:4},156:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"SBC A, H",bytes:1,cycles:4},157:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"SBC A, L",bytes:1,cycles:4},158:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SBC A, (HL)",bytes:1,cycles:4},159:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"SBC A, A",bytes:1,cycles:4},160:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"AND B",bytes:1,cycles:4},161:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"AND C",bytes:1,cycles:4},162:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"AND D",bytes:1,cycles:4},163:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"AND E",bytes:1,cycles:4},164:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"AND H",bytes:1,cycles:4},165:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"AND L",bytes:1,cycles:4},166:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"AND (HL)",bytes:1,cycles:8},167:{action:y,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"AND A",bytes:1,cycles:4},168:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"XOR B",bytes:1,cycles:4},169:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"XOR C",bytes:1,cycles:4},170:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"XOR D",bytes:1,cycles:4},171:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"XOR E",bytes:1,cycles:4},172:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"XOR H",bytes:1,cycles:4},173:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"XOR L",bytes:1,cycles:4},174:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"XOR (HL)",bytes:1,cycles:8},175:{action:B,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"XOR A",bytes:1,cycles:4},176:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"OR B",bytes:1,cycles:4},177:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"OR C",bytes:1,cycles:4},178:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"OR D",bytes:1,cycles:4},179:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"OR E",bytes:1,cycles:4},180:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"OR H",bytes:1,cycles:4},181:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"OR L",bytes:1,cycles:4},182:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"OR (HL)",bytes:1,cycles:4},183:{action:L,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"OR A",bytes:1,cycles:4},184:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"CP B",bytes:1,cycles:4},185:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3}],mnemonic:"CP C",bytes:1,cycles:4},186:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:4}],mnemonic:"CP D",bytes:1,cycles:4},187:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:5}],mnemonic:"CP E",bytes:1,cycles:4},188:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:6}],mnemonic:"CP H",bytes:1,cycles:4},189:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:7}],mnemonic:"CP L",bytes:1,cycles:4},190:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"CP (HL)",bytes:1,cycles:8},191:{action:m,operands:[{type:n.Register8,target:0},{type:n.Register8,target:0}],mnemonic:"CP A",bytes:1,cycles:4},192:{action:function(e){return e.flagZ?t:E(e)},operands:[],mnemonic:"RET NZ",bytes:1,cycles:8},193:{action:C,operands:[{type:n.Register16,target:2}],mnemonic:"POP BC",bytes:1,cycles:12},194:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagZ||(e.PC=r),t},operands:[{type:n.Immediate16}],mnemonic:"JP NZ a16",bytes:1,cycles:12},195:{action:u,operands:[{type:n.Immediate16}],mnemonic:"JP a16",bytes:3,cycles:12},196:{action:function(s,r){const a=s.readOperand(r[0]);return s.flagZ||(g(s,[{type:n.Register16,target:e}]),s.PC=a),t},operands:[{type:n.Immediate16}],mnemonic:"CALL NZ, a16",bytes:3,cycles:12},197:{action:g,operands:[{type:n.Register16,target:2}],mnemonic:"PUSH BC",bytes:1,cycles:16},198:{action:o,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"ADD A, d8",bytes:2,cycles:8},199:{action:function(e){return f(e,0),t},operands:[],mnemonic:"RST 00",bytes:1,cycles:32},200:{action:function(e){return e.flagZ?E(e):t},operands:[],mnemonic:"RET Z",bytes:1,cycles:8},201:{action:E,operands:[],mnemonic:"RET",bytes:1,cycles:8},202:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagZ&&(e.PC=r),t},operands:[{type:n.Immediate16}],mnemonic:"JP Z a16",bytes:1,cycles:12},204:{action:function(s,r){const a=s.readOperand(r[0]);return s.flagZ&&(g(s,[{type:n.Register16,target:e}]),s.PC=a),t},operands:[{type:n.Immediate16}],mnemonic:"CALL Z, a16",bytes:3,cycles:12},205:{action:function(s,r){const a=s.readOperand(r[0]);return g(s,[{type:n.Register16,target:e}]),s.PC=a,t},operands:[{type:n.Immediate16}],mnemonic:"CALL a16",bytes:3,cycles:24},206:{action:r,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"ADC A, d8",bytes:2,cycles:8},207:{action:function(e){return f(e,8),t},operands:[],mnemonic:"RST 08",bytes:1,cycles:32},208:{action:function(e){return e.flagC?t:E(e)},operands:[],mnemonic:"RET NC",bytes:1,cycles:8},209:{action:C,operands:[{type:n.Register16,target:4}],mnemonic:"POP DE",bytes:1,cycles:12},210:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagC||(e.PC=r),t},operands:[{type:n.Immediate16}],mnemonic:"JP NC a16",bytes:1,cycles:12},212:{action:function(s,r){const a=s.readOperand(r[0]);return s.flagC||(g(s,[{type:n.Register16,target:e}]),s.PC=a),t},operands:[{type:n.Immediate16}],mnemonic:"CALL NC, a16",bytes:3,cycles:12},213:{action:g,operands:[{type:n.Register16,target:4}],mnemonic:"PUSH DE",bytes:1,cycles:16},214:{action:H,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"SUB d8",bytes:2,cycles:8},215:{action:function(e){return f(e,16),t},operands:[],mnemonic:"RST 10",bytes:1,cycles:32},216:{action:function(e){return e.flagC?E(e):t},operands:[],mnemonic:"RET C",bytes:1,cycles:8},217:{action:function(e){return E(e),l(e),t},operands:[],mnemonic:"RETI",bytes:1,cycles:8},218:{action:function(e,s){const r=e.readOperand(s[0]);return e.flagC&&(e.PC=r),t},operands:[{type:n.Immediate16}],mnemonic:"JP C a16",bytes:1,cycles:12},220:{action:function(s,r){const a=s.readOperand(r[0]);return s.flagC&&(g(s,[{type:n.Register16,target:e}]),s.PC=a),t},operands:[{type:n.Immediate16}],mnemonic:"CALL C, a16",bytes:3,cycles:12},222:{action:V,operands:[{type:n.Register8,target:0},{type:n.Register8,target:2}],mnemonic:"SBC A, B",bytes:2,cycles:8},223:{action:function(e){return f(e,24),t},operands:[],mnemonic:"RST 18",bytes:1,cycles:32},224:{action:b,operands:[{type:n.Immediate8,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LDH a8, A",bytes:2,cycles:12},225:{action:C,operands:[{type:n.Register16,target:6}],mnemonic:"POP HL",bytes:1,cycles:12},226:{action:b,operands:[{type:n.Register8,target:3,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LD (C), A",bytes:1,cycles:8},229:{action:g,operands:[{type:n.Register16,target:6}],mnemonic:"PUSH HL",bytes:1,cycles:16},230:{action:y,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"AND d8",bytes:2,cycles:8},231:{action:function(e){return f(e,32),t},operands:[],mnemonic:"RST 20",bytes:1,cycles:32},232:{action:function(e,t){const s=e.SP,r=e.readOperand(t[0]),n=s+r,a=65535&n;return e.SP=a,{Z:!1,N:!1,H:4096==((255&s)+(255&r)&4096),C:65536==(65536&n)}},operands:[{type:n.Immediate8Signed}],mnemonic:"ADD SP, r8",bytes:2,cycles:16},233:{action:u,operands:[{type:n.Register16,target:6}],mnemonic:"JP HL",bytes:1,cycles:4},234:{action:b,operands:[{type:n.Immediate16,isAddress:!0},{type:n.Register8,target:0}],mnemonic:"LDH a16, A",bytes:3,cycles:16},238:{action:B,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"XOR d8",bytes:1,cycles:8},239:{action:function(e){return f(e,40),t},operands:[],mnemonic:"RST 28",bytes:1,cycles:32},240:{action:b,operands:[{type:n.Register8,target:0},{type:n.Immediate8,isAddress:!0}],mnemonic:"LDH A, a8",bytes:2,cycles:12},241:{action:C,operands:[{type:n.Register16,target:0}],mnemonic:"POP AF",bytes:1,cycles:12},242:{action:b,operands:[{type:n.Register8,target:0},{type:n.Register8,target:3,isAddress:!0}],mnemonic:"LD A, (C)",bytes:1,cycles:12},243:{action:function(e){return e.interruptsEnabled=!1,t},operands:[],mnemonic:"DI",bytes:1,cycles:4},245:{action:g,operands:[{type:n.Register16,target:0}],mnemonic:"PUSH AF",bytes:1,cycles:16},246:{action:L,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"OR d8",bytes:1,cycles:8},247:{action:function(e){return f(e,48),t},operands:[],mnemonic:"RST 30",bytes:1,cycles:32},248:{action:function(e){const t=e.read8Signed();return e.HL=e.SP+t,{Z:!1,N:!1,H:s(e.SP,t),C:256==(256&e.HL)}},operands:[],mnemonic:"LD HL, SP + r8",bytes:2,cycles:12},249:{action:b,operands:[{type:n.Register16,target:8},{type:n.Register16,target:6}],mnemonic:"LD SP, HL",bytes:1,cycles:8},250:{action:b,operands:[{type:n.Register8,target:0},{type:n.Immediate16,isAddress:!0}],mnemonic:"LD A, a16",bytes:1,cycles:16},251:{action:l,operands:[],mnemonic:"EI",bytes:1,cycles:4},254:{action:m,operands:[{type:n.Register8,target:0},{type:n.Immediate8}],mnemonic:"CP d8",bytes:2,cycles:8},255:{action:function(e){return f(e,56),t},operands:[],mnemonic:"RST 38",bytes:1,cycles:32}};function w(e,t){const s=e.readOperand(t[0]);return{Z:0==(e.readOperand(t[1])&Math.pow(2,s)),N:!1,H:!0,C:null}}function P(e,s){const r=e.readOperand(s[0]),n=e.readOperand(s[1]),a=Math.pow(2,r);return e.writeToOperand(s[1],n&~a),t}function O(e,s){const r=e.readOperand(s[0]),n=e.readOperand(s[1]),a=Math.pow(2,r);return e.writeToOperand(s[1],n|a),t}function M(e,t){const s=e.readOperand(t[0])<<1,r=255&s;return e.writeToOperand(t[0],r),{Z:0===r,N:!1,H:!1,C:256==(256&s)}}function N(e,t){const s=e.readOperand(t[0]),r=255&(s>>1|128&s);return e.writeToOperand(t[0],r),{Z:0===r,N:!1,H:!1,C:1==(1&s)}}function v(e,t){const s=e.readOperand(t[0]),r=255&s>>1;return e.writeToOperand(t[0],r),{Z:0===r,N:!1,H:!1,C:1==(1&s)}}function k(e,t){const s=e.readOperand(t[0]),r=255&(s<<4|s>>4);return e.writeToOperand(t[0],r),{Z:0===r,N:!1,H:!1,C:!1}}var U={0:{action:A,operands:[{type:n.Register8,target:2}],mnemonic:"RLC B",bytes:1,cycles:8},1:{action:A,operands:[{type:n.Register8,target:3}],mnemonic:"RLC C",bytes:1,cycles:8},2:{action:A,operands:[{type:n.Register8,target:4}],mnemonic:"RLC D",bytes:1,cycles:8},3:{action:A,operands:[{type:n.Register8,target:5}],mnemonic:"RLC E",bytes:1,cycles:8},4:{action:A,operands:[{type:n.Register8,target:6}],mnemonic:"RLC H",bytes:1,cycles:8},5:{action:A,operands:[{type:n.Register8,target:7}],mnemonic:"RLC L",bytes:1,cycles:8},6:{action:A,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RLC (HL)",bytes:1,cycles:8},7:{action:A,operands:[{type:n.Register8,target:0}],mnemonic:"RLC A",bytes:1,cycles:8},8:{action:D,operands:[{type:n.Register8,target:2}],mnemonic:"RRC B",bytes:1,cycles:8},9:{action:D,operands:[{type:n.Register8,target:3}],mnemonic:"RRC C",bytes:1,cycles:8},10:{action:D,operands:[{type:n.Register8,target:4}],mnemonic:"RRC D",bytes:1,cycles:8},11:{action:D,operands:[{type:n.Register8,target:5}],mnemonic:"RRC E",bytes:1,cycles:8},12:{action:D,operands:[{type:n.Register8,target:6}],mnemonic:"RRC H",bytes:1,cycles:8},13:{action:D,operands:[{type:n.Register8,target:7}],mnemonic:"RRC L",bytes:1,cycles:8},14:{action:D,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RRC (HL)",bytes:1,cycles:16},15:{action:D,operands:[{type:n.Register8,target:0}],mnemonic:"RRC A",bytes:1,cycles:8},16:{action:S,operands:[{type:n.Register8,target:2}],mnemonic:"RL B",bytes:1,cycles:8},17:{action:S,operands:[{type:n.Register8,target:3}],mnemonic:"RL C",bytes:1,cycles:8},18:{action:S,operands:[{type:n.Register8,target:4}],mnemonic:"RL D",bytes:1,cycles:8},19:{action:S,operands:[{type:n.Register8,target:5}],mnemonic:"RL E",bytes:1,cycles:8},20:{action:S,operands:[{type:n.Register8,target:6}],mnemonic:"RL H",bytes:1,cycles:8},21:{action:S,operands:[{type:n.Register8,target:7}],mnemonic:"RL L",bytes:1,cycles:8},22:{action:S,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RL (HL)",bytes:1,cycles:8},23:{action:S,operands:[{type:n.Register8,target:0}],mnemonic:"RL A",bytes:1,cycles:8},24:{action:T,operands:[{type:n.Register8,target:2}],mnemonic:"RR B",bytes:1,cycles:8},25:{action:T,operands:[{type:n.Register8,target:3}],mnemonic:"RR C",bytes:1,cycles:8},26:{action:T,operands:[{type:n.Register8,target:4}],mnemonic:"RR D",bytes:1,cycles:8},27:{action:T,operands:[{type:n.Register8,target:5}],mnemonic:"RR E",bytes:1,cycles:8},28:{action:T,operands:[{type:n.Register8,target:6}],mnemonic:"RR H",bytes:1,cycles:8},29:{action:T,operands:[{type:n.Register8,target:7}],mnemonic:"RR L",bytes:1,cycles:8},30:{action:T,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RR (HL)",bytes:1,cycles:16},31:{action:T,operands:[{type:n.Register8,target:0}],mnemonic:"RR A",bytes:1,cycles:8},32:{action:M,operands:[{type:n.Register8,target:2}],mnemonic:"SLA B",bytes:1,cycles:8},33:{action:M,operands:[{type:n.Register8,target:3}],mnemonic:"SLA C",bytes:1,cycles:8},34:{action:M,operands:[{type:n.Register8,target:4}],mnemonic:"SLA D",bytes:1,cycles:8},35:{action:M,operands:[{type:n.Register8,target:5}],mnemonic:"SLA E",bytes:1,cycles:8},36:{action:M,operands:[{type:n.Register8,target:6}],mnemonic:"SLA H",bytes:1,cycles:8},37:{action:M,operands:[{type:n.Register8,target:7}],mnemonic:"SLA L",bytes:1,cycles:8},38:{action:M,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SLA (HL)",bytes:1,cycles:16},39:{action:M,operands:[{type:n.Register8,target:0}],mnemonic:"SLA A",bytes:1,cycles:8},40:{action:N,operands:[{type:n.Register8,target:2}],mnemonic:"SRA B",bytes:1,cycles:8},41:{action:N,operands:[{type:n.Register8,target:3}],mnemonic:"SRA C",bytes:1,cycles:8},42:{action:N,operands:[{type:n.Register8,target:4}],mnemonic:"SRA D",bytes:1,cycles:8},43:{action:N,operands:[{type:n.Register8,target:5}],mnemonic:"SRA E",bytes:1,cycles:8},44:{action:N,operands:[{type:n.Register8,target:6}],mnemonic:"SRA H",bytes:1,cycles:8},45:{action:N,operands:[{type:n.Register8,target:7}],mnemonic:"SRA L",bytes:1,cycles:8},46:{action:N,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SRA (HL)",bytes:1,cycles:16},47:{action:N,operands:[{type:n.Register8,target:0}],mnemonic:"SRA A",bytes:1,cycles:8},48:{action:k,operands:[{type:n.Register8,target:2}],mnemonic:"SWP B",bytes:1,cycles:8},49:{action:k,operands:[{type:n.Register8,target:3}],mnemonic:"SWP C",bytes:1,cycles:8},50:{action:k,operands:[{type:n.Register8,target:4}],mnemonic:"SWP D",bytes:1,cycles:8},51:{action:k,operands:[{type:n.Register8,target:5}],mnemonic:"SWP E",bytes:1,cycles:8},52:{action:k,operands:[{type:n.Register8,target:6}],mnemonic:"SWP H",bytes:1,cycles:8},53:{action:k,operands:[{type:n.Register8,target:7}],mnemonic:"SWP L",bytes:1,cycles:8},54:{action:k,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SWP (HL)",bytes:1,cycles:16},55:{action:k,operands:[{type:n.Register8,target:0}],mnemonic:"SWP A",bytes:1,cycles:8},56:{action:v,operands:[{type:n.Register8,target:2}],mnemonic:"SRL B",bytes:1,cycles:8},57:{action:v,operands:[{type:n.Register8,target:3}],mnemonic:"SRL C",bytes:1,cycles:8},58:{action:v,operands:[{type:n.Register8,target:4}],mnemonic:"SRL D",bytes:1,cycles:8},59:{action:v,operands:[{type:n.Register8,target:5}],mnemonic:"SRL E",bytes:1,cycles:8},60:{action:v,operands:[{type:n.Register8,target:6}],mnemonic:"SRL H",bytes:1,cycles:8},61:{action:v,operands:[{type:n.Register8,target:7}],mnemonic:"SRL L",bytes:1,cycles:8},62:{action:v,operands:[{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SRL (HL)",bytes:1,cycles:8},63:{action:v,operands:[{type:n.Register8,target:0}],mnemonic:"SRL A",bytes:1,cycles:8},64:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:2}],mnemonic:"BIT 0, B",bytes:1,cycles:8},65:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:3}],mnemonic:"BIT 0, C",bytes:1,cycles:8},66:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:4}],mnemonic:"BIT 0, D",bytes:1,cycles:8},67:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:5}],mnemonic:"BIT 0, E",bytes:1,cycles:8},68:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:6}],mnemonic:"BIT 0, H",bytes:1,cycles:8},69:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:7}],mnemonic:"BIT 0, L",bytes:1,cycles:8},70:{action:w,operands:[{type:n.Value,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 0, (HL)",bytes:1,cycles:16},71:{action:w,operands:[{type:n.Value,target:0},{type:n.Register8,target:0}],mnemonic:"BIT 0, A",bytes:1,cycles:8},72:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:2}],mnemonic:"BIT 1, B",bytes:1,cycles:8},73:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:3}],mnemonic:"BIT 1, C",bytes:1,cycles:8},74:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:4}],mnemonic:"BIT 1, D",bytes:1,cycles:8},75:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:5}],mnemonic:"BIT 1, E",bytes:1,cycles:8},76:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:6}],mnemonic:"BIT 1, H",bytes:1,cycles:8},77:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:7}],mnemonic:"BIT 1, L",bytes:1,cycles:8},78:{action:w,operands:[{type:n.Value,target:1},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 1, (HL)",bytes:1,cycles:16},79:{action:w,operands:[{type:n.Value,target:1},{type:n.Register8,target:0}],mnemonic:"BIT 1, A",bytes:1,cycles:8},80:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:2}],mnemonic:"BIT 2, B",bytes:1,cycles:8},81:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:3}],mnemonic:"BIT 2, C",bytes:1,cycles:8},82:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:4}],mnemonic:"BIT 2, D",bytes:1,cycles:8},83:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:5}],mnemonic:"BIT 2, E",bytes:1,cycles:8},84:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:6}],mnemonic:"BIT 2, H",bytes:1,cycles:8},85:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:7}],mnemonic:"BIT 2, L",bytes:1,cycles:8},86:{action:w,operands:[{type:n.Value,target:2},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 2, (HL)",bytes:1,cycles:16},87:{action:w,operands:[{type:n.Value,target:2},{type:n.Register8,target:0}],mnemonic:"BIT 2, A",bytes:1,cycles:8},88:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:2}],mnemonic:"BIT 3, B",bytes:1,cycles:8},89:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:3}],mnemonic:"BIT 3, C",bytes:1,cycles:8},90:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:4}],mnemonic:"BIT 3, D",bytes:1,cycles:8},91:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:5}],mnemonic:"BIT 3, E",bytes:1,cycles:8},92:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:6}],mnemonic:"BIT 3, H",bytes:1,cycles:8},93:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:7}],mnemonic:"BIT 3, L",bytes:1,cycles:8},94:{action:w,operands:[{type:n.Value,target:3},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 3, (HL)",bytes:1,cycles:16},95:{action:w,operands:[{type:n.Value,target:3},{type:n.Register8,target:0}],mnemonic:"BIT 3, A",bytes:1,cycles:8},96:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:2}],mnemonic:"BIT 4, B",bytes:1,cycles:8},97:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:3}],mnemonic:"BIT 4, C",bytes:1,cycles:8},98:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:4}],mnemonic:"BIT 4, D",bytes:1,cycles:8},99:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:5}],mnemonic:"BIT 4, E",bytes:1,cycles:8},100:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:6}],mnemonic:"BIT 4, H",bytes:1,cycles:8},101:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:7}],mnemonic:"BIT 4, L",bytes:1,cycles:8},102:{action:w,operands:[{type:n.Value,target:4},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 4, (HL)",bytes:1,cycles:16},103:{action:w,operands:[{type:n.Value,target:4},{type:n.Register8,target:0}],mnemonic:"BIT 4, A",bytes:1,cycles:8},104:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:2}],mnemonic:"BIT 5, B",bytes:1,cycles:8},105:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:3}],mnemonic:"BIT 5, C",bytes:1,cycles:8},106:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:4}],mnemonic:"BIT 5, D",bytes:1,cycles:8},107:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:5}],mnemonic:"BIT 5, E",bytes:1,cycles:8},108:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:6}],mnemonic:"BIT 5, H",bytes:1,cycles:8},109:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:7}],mnemonic:"BIT 5, L",bytes:1,cycles:8},110:{action:w,operands:[{type:n.Value,target:5},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 5, (HL)",bytes:1,cycles:16},111:{action:w,operands:[{type:n.Value,target:5},{type:n.Register8,target:0}],mnemonic:"BIT 5, A",bytes:1,cycles:8},112:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:2}],mnemonic:"BIT 6, B",bytes:1,cycles:8},113:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:3}],mnemonic:"BIT 6, C",bytes:1,cycles:8},114:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:4}],mnemonic:"BIT 6, D",bytes:1,cycles:8},115:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:5}],mnemonic:"BIT 6, E",bytes:1,cycles:8},116:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:6}],mnemonic:"BIT 6, H",bytes:1,cycles:8},117:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:7}],mnemonic:"BIT 6, L",bytes:1,cycles:8},118:{action:w,operands:[{type:n.Value,target:6},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 6, (HL)",bytes:1,cycles:16},119:{action:w,operands:[{type:n.Value,target:6},{type:n.Register8,target:0}],mnemonic:"BIT 6, A",bytes:1,cycles:8},120:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:2}],mnemonic:"BIT 7, B",bytes:1,cycles:8},121:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:3}],mnemonic:"BIT 7, C",bytes:1,cycles:8},122:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:4}],mnemonic:"BIT 7, D",bytes:1,cycles:8},123:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:5}],mnemonic:"BIT 7, E",bytes:1,cycles:8},124:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:6}],mnemonic:"BIT 7, H",bytes:1,cycles:8},125:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:7}],mnemonic:"BIT 7, L",bytes:1,cycles:8},126:{action:w,operands:[{type:n.Value,target:7},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"BIT 7, (HL)",bytes:1,cycles:16},127:{action:w,operands:[{type:n.Value,target:7},{type:n.Register8,target:0}],mnemonic:"BIT 7, A",bytes:1,cycles:8},128:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:2}],mnemonic:"RES 0, B",bytes:1,cycles:8},129:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:3}],mnemonic:"RES 0, C",bytes:1,cycles:8},130:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:4}],mnemonic:"RES 0, D",bytes:1,cycles:8},131:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:5}],mnemonic:"RES 0, E",bytes:1,cycles:8},132:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:6}],mnemonic:"RES 0, H",bytes:1,cycles:8},133:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:7}],mnemonic:"RES 0, L",bytes:1,cycles:8},134:{action:P,operands:[{type:n.Value,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 0, (HL)",bytes:1,cycles:16},135:{action:P,operands:[{type:n.Value,target:0},{type:n.Register8,target:0}],mnemonic:"RES 0, A",bytes:1,cycles:8},136:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:2}],mnemonic:"RES 1, B",bytes:1,cycles:8},137:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:3}],mnemonic:"RES 1, C",bytes:1,cycles:8},138:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:4}],mnemonic:"RES 1, D",bytes:1,cycles:8},139:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:5}],mnemonic:"RES 1, E",bytes:1,cycles:8},140:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:6}],mnemonic:"RES 1, H",bytes:1,cycles:8},141:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:7}],mnemonic:"RES 1, L",bytes:1,cycles:8},142:{action:P,operands:[{type:n.Value,target:1},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 1, (HL)",bytes:1,cycles:16},143:{action:P,operands:[{type:n.Value,target:1},{type:n.Register8,target:0}],mnemonic:"RES 1, A",bytes:1,cycles:8},144:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:2}],mnemonic:"RES 2, B",bytes:1,cycles:8},145:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:3}],mnemonic:"RES 2, C",bytes:1,cycles:8},146:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:4}],mnemonic:"RES 2, D",bytes:1,cycles:8},147:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:5}],mnemonic:"RES 2, E",bytes:1,cycles:8},148:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:6}],mnemonic:"RES 2, H",bytes:1,cycles:8},149:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:7}],mnemonic:"RES 2, L",bytes:1,cycles:8},150:{action:P,operands:[{type:n.Value,target:2},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 2, (HL)",bytes:1,cycles:16},151:{action:P,operands:[{type:n.Value,target:2},{type:n.Register8,target:0}],mnemonic:"RES 2, A",bytes:1,cycles:8},152:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:2}],mnemonic:"RES 3, B",bytes:1,cycles:8},153:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:3}],mnemonic:"RES 3, C",bytes:1,cycles:8},154:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:4}],mnemonic:"RES 3, D",bytes:1,cycles:8},155:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:5}],mnemonic:"RES 3, E",bytes:1,cycles:8},156:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:6}],mnemonic:"RES 3, H",bytes:1,cycles:8},157:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:7}],mnemonic:"RES 3, L",bytes:1,cycles:8},158:{action:P,operands:[{type:n.Value,target:3},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 3, (HL)",bytes:1,cycles:16},159:{action:P,operands:[{type:n.Value,target:3},{type:n.Register8,target:0}],mnemonic:"RES 3, A",bytes:1,cycles:8},160:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:2}],mnemonic:"RES 4, B",bytes:1,cycles:8},161:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:3}],mnemonic:"RES 4, C",bytes:1,cycles:8},162:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:4}],mnemonic:"RES 4, D",bytes:1,cycles:8},163:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:5}],mnemonic:"RES 4, E",bytes:1,cycles:8},164:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:6}],mnemonic:"RES 4, H",bytes:1,cycles:8},165:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:7}],mnemonic:"RES 4, L",bytes:1,cycles:8},166:{action:P,operands:[{type:n.Value,target:4},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 4, (HL)",bytes:1,cycles:16},167:{action:P,operands:[{type:n.Value,target:4},{type:n.Register8,target:0}],mnemonic:"RES 4, A",bytes:1,cycles:8},168:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:2}],mnemonic:"RES 5, B",bytes:1,cycles:8},169:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:3}],mnemonic:"RES 5, C",bytes:1,cycles:8},170:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:4}],mnemonic:"RES 5, D",bytes:1,cycles:8},171:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:5}],mnemonic:"RES 5, E",bytes:1,cycles:8},172:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:6}],mnemonic:"RES 5, H",bytes:1,cycles:8},173:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:7}],mnemonic:"RES 5, L",bytes:1,cycles:8},174:{action:P,operands:[{type:n.Value,target:5},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 5, (HL)",bytes:1,cycles:16},175:{action:P,operands:[{type:n.Value,target:5},{type:n.Register8,target:0}],mnemonic:"RES 5, A",bytes:1,cycles:8},176:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:2}],mnemonic:"RES 6, B",bytes:1,cycles:8},177:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:3}],mnemonic:"RES 6, C",bytes:1,cycles:8},178:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:4}],mnemonic:"RES 6, D",bytes:1,cycles:8},179:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:5}],mnemonic:"RES 6, E",bytes:1,cycles:8},180:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:6}],mnemonic:"RES 6, H",bytes:1,cycles:8},181:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:7}],mnemonic:"RES 6, L",bytes:1,cycles:8},182:{action:P,operands:[{type:n.Value,target:6},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 6, (HL)",bytes:1,cycles:16},183:{action:P,operands:[{type:n.Value,target:6},{type:n.Register8,target:0}],mnemonic:"RES 6, A",bytes:1,cycles:8},184:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:2}],mnemonic:"RES 7, B",bytes:1,cycles:8},185:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:3}],mnemonic:"RES 7, C",bytes:1,cycles:8},186:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:4}],mnemonic:"RES 7, D",bytes:1,cycles:8},187:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:5}],mnemonic:"RES 7, E",bytes:1,cycles:8},188:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:6}],mnemonic:"RES 7, H",bytes:1,cycles:8},189:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:7}],mnemonic:"RES 7, L",bytes:1,cycles:8},190:{action:P,operands:[{type:n.Value,target:7},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"RES 7, (HL)",bytes:1,cycles:16},191:{action:P,operands:[{type:n.Value,target:7},{type:n.Register8,target:0}],mnemonic:"RES 7, A",bytes:1,cycles:8},192:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:2}],mnemonic:"SET 0, B",bytes:1,cycles:8},193:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:3}],mnemonic:"SET 0, C",bytes:1,cycles:8},194:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:4}],mnemonic:"SET 0, D",bytes:1,cycles:8},195:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:5}],mnemonic:"SET 0, E",bytes:1,cycles:8},196:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:6}],mnemonic:"SET 0, H",bytes:1,cycles:8},197:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:7}],mnemonic:"SET 0, L",bytes:1,cycles:8},198:{action:O,operands:[{type:n.Value,target:0},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 0, (HL)",bytes:1,cycles:16},199:{action:O,operands:[{type:n.Value,target:0},{type:n.Register8,target:0}],mnemonic:"SET 0, A",bytes:1,cycles:8},200:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:2}],mnemonic:"SET 1, B",bytes:1,cycles:8},201:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:3}],mnemonic:"SET 1, C",bytes:1,cycles:8},202:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:4}],mnemonic:"SET 1, D",bytes:1,cycles:8},203:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:5}],mnemonic:"SET 1, E",bytes:1,cycles:8},204:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:6}],mnemonic:"SET 1, H",bytes:1,cycles:8},205:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:7}],mnemonic:"SET 1, L",bytes:1,cycles:8},206:{action:O,operands:[{type:n.Value,target:1},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 1, (HL)",bytes:1,cycles:16},207:{action:O,operands:[{type:n.Value,target:1},{type:n.Register8,target:0}],mnemonic:"SET 1, A",bytes:1,cycles:8},208:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:2}],mnemonic:"SET 2, B",bytes:1,cycles:8},209:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:3}],mnemonic:"SET 2, C",bytes:1,cycles:8},210:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:4}],mnemonic:"SET 2, D",bytes:1,cycles:8},211:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:5}],mnemonic:"SET 2, E",bytes:1,cycles:8},212:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:6}],mnemonic:"SET 2, H",bytes:1,cycles:8},213:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:7}],mnemonic:"SET 2, L",bytes:1,cycles:8},214:{action:O,operands:[{type:n.Value,target:2},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 2, (HL)",bytes:1,cycles:16},215:{action:O,operands:[{type:n.Value,target:2},{type:n.Register8,target:0}],mnemonic:"SET 2, A",bytes:1,cycles:8},216:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:2}],mnemonic:"SET 3, B",bytes:1,cycles:8},217:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:3}],mnemonic:"SET 3, C",bytes:1,cycles:8},218:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:4}],mnemonic:"SET 3, D",bytes:1,cycles:8},219:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:5}],mnemonic:"SET 3, E",bytes:1,cycles:8},220:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:6}],mnemonic:"SET 3, H",bytes:1,cycles:8},221:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:7}],mnemonic:"SET 3, L",bytes:1,cycles:8},222:{action:O,operands:[{type:n.Value,target:3},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 3, (HL)",bytes:1,cycles:16},223:{action:O,operands:[{type:n.Value,target:3},{type:n.Register8,target:0}],mnemonic:"SET 3, A",bytes:1,cycles:8},224:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:2}],mnemonic:"SET 4, B",bytes:1,cycles:8},225:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:3}],mnemonic:"SET 4, C",bytes:1,cycles:8},226:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:4}],mnemonic:"SET 4, D",bytes:1,cycles:8},227:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:5}],mnemonic:"SET 4, E",bytes:1,cycles:8},228:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:6}],mnemonic:"SET 4, H",bytes:1,cycles:8},229:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:7}],mnemonic:"SET 4, L",bytes:1,cycles:8},230:{action:O,operands:[{type:n.Value,target:4},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 4, (HL)",bytes:1,cycles:16},231:{action:O,operands:[{type:n.Value,target:4},{type:n.Register8,target:0}],mnemonic:"SET 4, A",bytes:1,cycles:8},232:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:2}],mnemonic:"SET 5, B",bytes:1,cycles:8},233:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:3}],mnemonic:"SET 5, C",bytes:1,cycles:8},234:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:4}],mnemonic:"SET 5, D",bytes:1,cycles:8},235:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:5}],mnemonic:"SET 5, E",bytes:1,cycles:8},236:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:6}],mnemonic:"SET 5, H",bytes:1,cycles:8},237:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:7}],mnemonic:"SET 5, L",bytes:1,cycles:8},238:{action:O,operands:[{type:n.Value,target:5},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 5, (HL)",bytes:1,cycles:16},239:{action:O,operands:[{type:n.Value,target:5},{type:n.Register8,target:0}],mnemonic:"SET 5, A",bytes:1,cycles:8},240:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:2}],mnemonic:"SET 6, B",bytes:1,cycles:8},241:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:3}],mnemonic:"SET 6, C",bytes:1,cycles:8},242:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:4}],mnemonic:"SET 6, D",bytes:1,cycles:8},243:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:5}],mnemonic:"SET 6, E",bytes:1,cycles:8},244:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:6}],mnemonic:"SET 6, H",bytes:1,cycles:8},245:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:7}],mnemonic:"SET 6, L",bytes:1,cycles:8},246:{action:O,operands:[{type:n.Value,target:6},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 6, (HL)",bytes:1,cycles:16},247:{action:O,operands:[{type:n.Value,target:6},{type:n.Register8,target:0}],mnemonic:"SET 6, A",bytes:1,cycles:8},248:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:2}],mnemonic:"SET 7, B",bytes:1,cycles:8},249:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:3}],mnemonic:"SET 7, C",bytes:1,cycles:8},250:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:4}],mnemonic:"SET 7, D",bytes:1,cycles:8},251:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:5}],mnemonic:"SET 7, E",bytes:1,cycles:8},252:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:6}],mnemonic:"SET 7, H",bytes:1,cycles:8},253:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:7}],mnemonic:"SET 7, L",bytes:1,cycles:8},254:{action:O,operands:[{type:n.Value,target:7},{type:n.Register16,target:6,isAddress:!0}],mnemonic:"SET 7, (HL)",bytes:1,cycles:16},255:{action:O,operands:[{type:n.Value,target:7},{type:n.Register8,target:0}],mnemonic:"SET 7, A",bytes:1,cycles:8}};class Z{get A(){return this.getRegister(0)}get F(){return this.getRegister(1)}get B(){return this.getRegister(2)}get C(){return this.getRegister(3)}get D(){return this.getRegister(4)}get E(){return this.getRegister(5)}get H(){return this.getRegister(6)}get L(){return this.getRegister(7)}get AF(){return this.getRegister16(0)}get BC(){return this.getRegister16(2)}get DE(){return this.getRegister16(4)}get HL(){return this.getRegister16(6)}get SP(){return this.getRegister16(8)}get PC(){return this.getRegister16(e)}get flagZ(){return 128==(128&this.F)}get flagN(){return 64==(64&this.F)}get flagH(){return 32==(32&this.F)}get flagC(){return 16==(16&this.F)}set A(e){this.setRegister(0,e)}set F(e){this.setRegister(1,240&e)}set B(e){this.setRegister(2,e)}set C(e){this.setRegister(3,e)}set D(e){this.setRegister(4,e)}set E(e){this.setRegister(5,e)}set H(e){this.setRegister(6,e)}set L(e){this.setRegister(7,e)}set AF(e){this.setRegister16(0,65520&e)}set BC(e){this.setRegister16(2,e)}set DE(e){this.setRegister16(4,e)}set HL(e){this.setRegister16(6,e)}set SP(e){this.setRegister16(8,e)}set PC(t){this.setRegister16(e,t)}set flagZ(e){this.F=e?128|this.F:127&this.F}set flagN(e){this.F=e?64|this.F:191&this.F}set flagH(e){this.F=e?32|this.F:223&this.F}set flagC(e){this.F=e?16|this.F:239&this.F}constructor(e){this.step=0,this.cycleOffset=0,this.opHistory=[],this.registersBuffer=new ArrayBuffer(12),this.registersView=new DataView(this.registersBuffer),this.dividerTick=0,this.timerTick=0,this.interruptsEnabled=!1,this.serialData=[],this.memoryMap=e}readOperand(e){let t;switch(e.type){case n.Immediate8:t=this.read8();break;case n.Immediate8Signed:t=this.read8Signed();break;case n.Immediate16:t=this.read16();break;case n.Register8:t=this.getRegister(e.target);break;case n.Register16:t=this.getRegister16(e.target),e.modifier===i.Increment?this.HL+=1:e.modifier===i.Decrement&&(this.HL-=1);break;case n.Value:return e.target}return!e.isAddress||e.type!==n.Immediate8&&e.type!==n.Register8?e.isAddress?this.read8(t):t:this.read8(65280|t)}writeToOperand(e,t){if(e.isAddress){let s;switch(e.type){case n.Immediate8:s=65280|this.read8();break;case n.Immediate8Signed:throw new Error("Immediate8Signed cannot be an address");case n.Immediate16:s=this.read16();break;case n.Register8:s=65280|this.getRegister(e.target);break;case n.Register16:s=this.getRegister16(e.target);break;case n.Value:throw Error("Invalid operand type - cannot write direct value")}this.write8(s,t)}else switch(e.type){case n.Register8:this.setRegister(e.target,t);break;case n.Register16:this.setRegister16(e.target,t);break;default:throw new Error(`Invalid direct target operand for write: ${e.type}`)}e.modifier===i.Increment?this.HL+=1:e.modifier===i.Decrement&&(this.HL-=1)}getRegister(e){return this.registersView.getUint8(e)}getRegister16(e){return this.registersView.getUint16(e,!1)}setRegister(e,t){1===e?this.registersView.setUint8(e,240&t):this.registersView.setUint8(e,t)}setRegister16(e,t){0===e?this.registersView.setUint16(e,65520&t,!1):this.registersView.setUint16(e,t,!1)}reset(){for(let e=0;e<this.registersView.byteLength;e++)this.registersView.setUint8(e,0);this.PC=256,this.SP=65534}tick(){if(this.updateDivider(),this.updateTimer(),this.cycleOffset-=1,this.cycleOffset>0)return!0;if(this.handleInterrupt())return!0;let e=this.read8();const t=203===e,s=t?U:I;if(t&&(e=this.read8()),!s[e])return console.log("Unknown opcode: ",`${t?"0xCB ":""}${e.toString(16)}`),!1;const r=s[e];this.opHistory.push({step:this.step,PC:`${this.PC-1} [${(this.PC-1).toString(16)}]`,codeString:e.toString(16),mnemonic:r.mnemonic,nextBytes:[this.memoryMap.read8(this.PC),this.memoryMap.read8(this.PC+1)],nextBytesSigned:[this.memoryMap.read8Signed(this.PC),this.memoryMap.read8Signed(this.PC+1)]}),this.opHistory.length>1e3&&this.opHistory.shift();const n=r.action(this,r.operands);return this.flagZ=n.Z??this.flagZ,this.flagN=n.N??this.flagN,this.flagH=n.H??this.flagH,this.flagC=n.C??this.flagC,this.step+=1,this.cycleOffset=r.cycles-1,!0}read8(e=null){const t=e??this.PC,s=this.memoryMap.read8(t);return null===e&&(this.PC+=1),s}read8Signed(e=null){const t=e??this.PC,s=this.memoryMap.read8Signed(t);return null===e&&(this.PC+=1),s}read16(e=null){const t=e??this.PC,s=this.memoryMap.read16(t);return null===e&&(this.PC+=2),s}write8(e,t){this.writeMasking(e,t)||this.memoryMap.write8(e,t)}write16(e,t){this.writeMasking(e,t)||this.memoryMap.write16(e,t)}writeMasking(e,t){return 8192===e||(65281===e&&this.serialData.push(t),65284===e&&(this.memoryMap.write8(e,0),!0))}updateDivider(){if(this.dividerTick+=1,16384===this.dividerTick){this.dividerTick=0;const e=this.memoryMap.read8(65284)+1;this.memoryMap.write8(65284,255&e)}}updateTimer(){const e=this.memoryMap.read8(65287);if(4==(4&e)){const t=2&e;let s=4096;if(1===t?s=262144:2===t?s=65536:3===t&&(s=16384),this.timerTick+=1,this.timerTick===s){this.timerTick=0;const e=this.memoryMap.read8(65285)+1;if(e>255){const e=this.memoryMap.read8(65286);this.memoryMap.write8(65285,e);const t=4|this.memoryMap.read8(65295);this.memoryMap.write8(65295,t)}else this.memoryMap.write8(65285,255&e)}}}handleInterrupt(){if(this.interruptsEnabled){const e=this.memoryMap.read8(65295),t=this.memoryMap.read8(65535);let s=0,r=31;return 1==(e&t&1)?(r=30,s=64):2==(e&t&2)?(r=29,s=72):4==(e&t&4)?(r=27,s=80):8==(e&t&8)?(r=23,s=88):16==(e&t&16)&&(r=15,s=96),0===s?!1:(this.interruptsEnabled=!1,this.memoryMap.write8(65295,e&r),this.SP-=2,this.memoryMap.write16(this.SP,this.PC),this.PC=s,this.cycleOffset=5,!0)}return!1}}const F=[0,4289374890,4283782485,4278190080],x=256,_=256;class ${constructor(e){this.imageData=e,this.imageData.data.fill(0),this.pixelArray=new Uint32Array(this.imageData.data.buffer)}}class q{constructor(e,t){this.lastUpdate=0,this.updateSamples=[],this.updateAverage=null,this.fpsSampleRate=50,this.currentScanline=0,this.currentScanlineOffset=0,this.lcdc=0,this.bgWindowEnable=0,this.objEnable=0,this.objSize=0,this.bgTileMap=0,this.tileSource=0,this.windowEnable=0,this.windowTileMap=0,this.lcdPpuEnable=0,this.stat=0,this.mode=0,this.coincidence=0,this.mode0HBlank=0,this.mode1VBlank=0,this.mode2Oam=0,this.myCoincidence=0,this.memoryMap=e,this.canvas=t;this.canvas.width=320,this.canvas.height=304;const s=t.getContext("2d");if(null===s)throw new Error("Failed to get canvas 2D Context.");this.backgroundLayer=new $(s.createImageData(x,_)),this.windowLayer=new $(s.createImageData(x,_)),this.spriteLayer=new $(s.createImageData(x,_)),this.bufferLayer=new $(s.createImageData(x,_)),this.bufferCanvas=document.createElement("canvas"),this.bufferCanvas.width=160,this.bufferCanvas.height=144,this.bufferCtx=this.bufferCanvas.getContext("2d"),this.ctx=s,this.memoryMap.write8(65344,128)}tick(){if(this.updateState(),!this.lcdPpuEnable){this.currentScanline=0,this.currentScanlineOffset=0;const e=this.memoryMap.read8(65345);return this.memoryMap.write8(65345,252&e),void this.memoryMap.write8(65348,this.currentScanline)}this.currentScanlineOffset+=1,456===this.currentScanlineOffset&&(this.currentScanlineOffset=0,this.currentScanline=153===this.currentScanline?0:this.currentScanline+1),this.memoryMap.write8(65348,this.currentScanline);let e=this.memoryMap.read8(65345),t=this.memoryMap.read8(65295);const s=64==(64&t),r=32==(64&t),n=8==(64&t);let a=!1;e&=248,this.currentScanline<143?this.currentScanlineOffset<80?(e|=2,a=r||a):this.currentScanlineOffset<252?e|=3:252===this.currentScanlineOffset&&(a=n||a):144===this.currentScanline&&0===this.currentScanlineOffset?(e|=1,t|=1):e|=1;this.memoryMap.read8(65349)===this.currentScanline&&(e|=4,a=s||a),a&&(t|=2),this.memoryMap.write8(65345,e),this.memoryMap.write8(65295,t)}update(){this.updateState();const e=this.memoryMap.read8(65346),t=this.memoryMap.read8(65347),s=this.memoryMap.read8(65354),r=this.memoryMap.read8(65355);if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bgWindowEnable){0===this.bgTileMap?this.renderTileMap(38912,this.bufferLayer):this.renderTileMap(39936,this.bufferLayer);const s=256*e+t;for(let e=0;e<this.bufferLayer.pixelArray.length;e++){let t=e+s;t>=65536&&(t-=65536),this.backgroundLayer.pixelArray[e]=this.bufferLayer.pixelArray[t]}this.renderLayer(this.backgroundLayer,0,0)}this.objEnable&&(this.renderSprites(),this.renderLayer(this.spriteLayer,0,0)),this.windowEnable&&(0===this.windowTileMap?this.renderTileMap(38912,this.windowLayer):this.renderTileMap(39936,this.windowLayer),this.renderLayer(this.windowLayer,r,s)),this.renderFps()}updateState(){const e=this.memoryMap.read8(65344);this.bgWindowEnable=1&e,this.objEnable=(2&e)>>1,this.objSize=(4&e)>>2,this.bgTileMap=(8&e)>>3,this.tileSource=(16&e)>>4,this.windowEnable=(32&e)>>5,this.windowTileMap=(64&e)>>6,this.lcdPpuEnable=(128&e)>>7;const t=this.memoryMap.read8(65345);this.mode=3&t,this.coincidence=(4&t)>>2,this.mode0HBlank=(8&t)>>3,this.mode1VBlank=(16&t)>>4,this.mode2Oam=(32&t)>>5,this.myCoincidence=(64&t)>>6}renderLayer(e,t,s){this.bufferCtx.putImageData(e.imageData,0,0),this.ctx.drawImage(this.bufferCanvas,t,s,this.canvas.width,this.canvas.height-16)}renderTileMap(e,t){for(let s=0;s<1024;s++){const r=Math.floor(s/32),n=s-32*r,a=0===this.tileSource?this.memoryMap.read8Signed(e+s):this.memoryMap.read8(e+s);this.renderTile(8*n,8*r,a,this.tileSource,t)}}renderSprites(){this.spriteLayer.pixelArray.fill(0);for(let e=0;e<40;e++){const t=this.memoryMap.read8(65024+4*e),s=this.memoryMap.read8(65024+4*e+1),r=this.memoryMap.read8(65024+4*e+2);this.renderTile(s-8,t-16,r,1,this.spriteLayer,!0)}}renderTile(e,t,s,r,n,a=!1){const i=1===this.objSize&&a?16:8,c=(0===r?36864:32768)+16*(16==i?254&s:s);for(let s=0;s<i;s++){const r=this.memoryMap.read8(c+2*s),a=this.memoryMap.read8(c+2*s+1);for(let i=0;i<8;i++){const c=F[(r>>7-i&1)+((a>>7-i&1)<<1)],o=(t+s)*x+e+i;n.pixelArray[o]=c}}}renderFps(){const e=performance.now(),t=e-this.lastUpdate||1;this.lastUpdate=e,this.updateSamples.push(t),this.updateSamples.length===this.fpsSampleRate&&(this.updateAverage=this.updateSamples.reduce(((e,t)=>e+t),0)/this.fpsSampleRate,this.updateSamples=[]);const s=this.updateAverage?Math.round(1e3/this.updateAverage):"-",r=this.updateAverage?Math.round(1e3*this.updateAverage)/1e3:"-";this.ctx.save(),this.ctx.fillStyle="black",this.ctx.fillRect(0,this.canvas.height-16,this.canvas.width,16),this.ctx.fillStyle="white",this.ctx.textBaseline="bottom",this.ctx.fillText(`FPS: ${s} (${r}ms)`,4,this.canvas.height-2),this.ctx.restore()}}const j="START",W="SELECT",J="DOWN",G="UP",Y="LEFT",X="RIGHT";var z,K;(K=z||(z={})).INPUT_TYPE_BUTTON="BUTTON",K.INPUT_TYPE_DIRECTION="DIRECTION";const Q={[j]:{type:z.INPUT_TYPE_BUTTON,mask:55},[W]:{type:z.INPUT_TYPE_BUTTON,mask:59},B:{type:z.INPUT_TYPE_BUTTON,mask:61},A:{type:z.INPUT_TYPE_BUTTON,mask:62},[J]:{type:z.INPUT_TYPE_DIRECTION,mask:55},[G]:{type:z.INPUT_TYPE_DIRECTION,mask:59},[Y]:{type:z.INPUT_TYPE_DIRECTION,mask:61},[X]:{type:z.INPUT_TYPE_DIRECTION,mask:62}},ee={w:G,a:Y,s:J,d:X,ArrowUp:G,ArrowLeft:Y,ArrowDown:J,ArrowRight:X,Enter:j,Shift:W," ":"A",Control:"B"};class te{constructor(e){this.inputPressed=!1,this.pressedInputs=[],this.onKeyDown=e=>{const t=ee[e.key]??null;null===t||this.pressedInputs.includes(t)||(this.inputPressed=!0,this.pressedInputs.push(t))},this.onKeyUp=e=>{const t=ee[e.key]??null;null!==t&&this.pressedInputs.includes(t)&&this.pressedInputs.splice(this.pressedInputs.indexOf(t),1)},this.memoryMap=e}init(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}tick(){this.inputPressed&&(this.inputPressed=!1);let e=15,t=15;this.pressedInputs.forEach((s=>{const r=Q[s];r.type===z.INPUT_TYPE_BUTTON?e&=r.mask:t&=r.mask}));let s=this.memoryMap.read8(65280);s|=16!=(16&s)?t:32!=(32&s)?e:15,this.memoryMap.write8(65280,s)}getPressedInputs(){return this.pressedInputs}}class se{loadCart(e){this.cartDataBuffer=e,this.cartData=new Uint8Array(this.cartDataBuffer);for(let e=0;e<32768;e++)this.memoryView.setUint8(e,this.cartData[e])}read8(e){return this.canRead(e)?this.memoryView.getUint8(e):0}read8Signed(e){return this.canRead(e)?this.memoryView.getInt8(e):0}read16(e){return this.canRead(e)?this.memoryView.getUint16(e,!0):0}write8(e,t){if(65350!=e)this.memoryView.setUint8(e,t);else{const e=t<<8;for(let t=0;t<159;t++)this.memoryView.setUint8(65024+t,this.read8(e+t))}}write16(e,t){this.memoryView.setUint16(e,t,!0)}canRead(e){return!(e>=65184&&e<=65279)&&!(e<0||e>=this.memoryBuffer.byteLength)}constructor(){this.memoryBuffer=new ArrayBuffer(65536),this.memoryView=new DataView(this.memoryBuffer),this.cartDataBuffer=null,this.cartData=null}}function re(e,t=2){const s=e.toString(16);return s.length<t?`${"0".repeat(t-s.length)}${s}`:`${s}`}function ne(e){const t=e.toString(2);return`${"0".repeat(8-t.length)}${t}b`}const ae=4194304;class ie{constructor(e,t){this.volume=0,this.isStarted=!1,this.isMuted=!1,this.audioCtx=e,this.gainNode=e.createGain(),this.gainNode.gain.setValueAtTime(this.volume,e.currentTime),this.gainNode.connect(t),this.oscillatorNode=e.createOscillator(),this.oscillatorNode.type="square",this.oscillatorNode.connect(this.gainNode)}start(){this.isStarted||(this.oscillatorNode.start(),this.isStarted=!0)}setFrequency(e){this.oscillatorNode.frequency.setValueAtTime(e,this.audioCtx.currentTime)}setVolume(e){this.volume=e,this.gainNode.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.isMuted=0===e}getVolume(){return this.volume}mute(){this.gainNode.gain.setValueAtTime(0,this.audioCtx.currentTime),this.isMuted=!0}unmute(){0===this.volume&&(this.volume=1),this.gainNode.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.isMuted=!1}}class ce{constructor(e){this.clockOffset=0,this.volume=.5,this.memoryMap=e,this.audioCtx=new AudioContext,this.masterGainNode=this.audioCtx.createGain(),this.masterGainNode.connect(this.audioCtx.destination),this.masterGainNode.gain.setValueAtTime(this.volume,this.audioCtx.currentTime),this.channel1=new ie(this.audioCtx,this.masterGainNode),this.channel2=new ie(this.audioCtx,this.masterGainNode)}tick(){this.clockOffset-=1,this.clockOffset>0||(this.updateChannel1(),this.updateChannel2(),this.clockOffset=8192)}pause(){return this.audioCtx.suspend()}resume(){return this.channel1.setVolume(.5),this.channel1.start(),this.channel2.setVolume(.5),this.channel2.start(),this.audioCtx.resume()}setVolume(e){this.volume=e,this.masterGainNode.gain.setValueAtTime(e,this.audioCtx.currentTime)}updateChannel1(){const e=this.getChannelDetails(65296);this.channel1.setFrequency(e.frequency),this.channel1.setVolume(e.envelopeInitialVolume/15)}updateChannel2(){const e=this.getChannelDetails(65301);this.channel2.setFrequency(e.frequency),this.channel2.setVolume(e.envelopeInitialVolume/15)}getChannelDetails(e){const t=this.memoryMap.read8(e),s=this.memoryMap.read8(e+1),r=this.memoryMap.read8(e+2),n=this.memoryMap.read8(e+3),a=this.memoryMap.read8(e+4),i=63&s;return{sweepTime:(112&t)>>4,sweepDirection:(8&t)>>3,sweepShift:7&t,duty:(192&s)>>6,length:i,lengthSeconds:1/256*(64-i),envelopeInitialVolume:(240&r)>>4,envelopeDirection:(8&r)>>3,envelopePeriod:7&r,frequency:ae/(2048-(n|(7&a)<<8)<<5),restartSound:(128&a)>>7,lengthEnabled:(64&a)>>6}}}class oe{constructor(e){this.isRunning=!1,this.isPaused=!1,this.isAudioEnabled=!0,this.animationFrameRequest=null,this.update=()=>{if(!this.isRunning)return void(this.animationFrameRequest=null);if(this.isPaused)return void(this.animationFrameRequest=requestAnimationFrame(this.update));let e=0;for(;e<69905.06666666667;){this.joypad.tick();const t=this.cpu.tick();if(this.gpu.tick(),this.isAudioEnabled&&this.apu.tick(),!t)return;e+=1}this.gpu.update(),this.updateDebug(),this.animationFrameRequest=requestAnimationFrame(this.update)},this.updateDebug=()=>{this.dbgA.innerHTML=re(this.cpu.A),this.dbgF.innerHTML=re(this.cpu.F),this.dbgB.innerHTML=re(this.cpu.B),this.dbgC.innerHTML=re(this.cpu.C),this.dbgD.innerHTML=re(this.cpu.D),this.dbgE.innerHTML=re(this.cpu.E),this.dbgH.innerHTML=re(this.cpu.H),this.dbgL.innerHTML=re(this.cpu.L),this.dbgAF.innerHTML=re(this.cpu.AF,4),this.dbgBC.innerHTML=re(this.cpu.BC,4),this.dbgDE.innerHTML=re(this.cpu.DE,4),this.dbgHL.innerHTML=re(this.cpu.HL,4),this.dbgPC.innerHTML=re(this.cpu.PC),this.dbgSP.innerHTML=re(this.cpu.SP);const e=this.memoryMap.read8(65280);this.dbgJoypad.innerHTML=`${ne(e)} (${re(e)}) [${this.joypad.getPressedInputs().join(", ")}]`;const t=this.memoryMap.read8(65296),s=this.memoryMap.read8(65297),r=this.memoryMap.read8(65298),n=this.memoryMap.read8(65299),a=this.memoryMap.read8(65300);this.dbgSound1.innerHTML=`\n      ${ne(t)}\n      ${ne(s)}\n      ${ne(r)}\n      ${ne(n)}\n      ${ne(a)}\n    `;const i=this.memoryMap.read8(65301),c=this.memoryMap.read8(65302),o=this.memoryMap.read8(65303),y=this.memoryMap.read8(65304),g=this.memoryMap.read8(65305);this.dbgSound2.innerHTML=`\n      ${ne(i)}\n      ${ne(c)}\n      ${ne(o)}\n      ${ne(y)}\n      ${ne(g)}\n    `;const p=[];for(let e=0;e<40;e++){const t=this.memoryMap.read8(65024+4*e),s=this.memoryMap.read8(65024+4*e+1),r=this.memoryMap.read8(65024+4*e+2),n=this.memoryMap.read8(65024+4*e+3);p.push(`[${s}, ${t}, ${r}, ${ne(n)}]`)}this.dbgOam.innerHTML=p.join("<br/>");const m=this.memoryMap.read8(65344),d=1&m,l=(2&m)>>1,R=(4&m)>>2,u=(8&m)>>3,b=(16&m)>>4,h=(32&m)>>5,L=(64&m)>>6,C=(128&m)>>7;this.dbgLcdC.innerHTML=`\n      ${ne(m)} (${re(m)})<br/>\n      LCD Enabled:   ${C}<br/>\n      Window Source: ${L}<br/>\n      Window Enabled: ${h}<br/>\n      Tile Source: ${b}<br/>\n      BG Source: ${u}<br/>\n      Obj Size: ${R}<br/>\n      Obj Enabled: ${l}<br/>\n      BG Enabled: ${d}<br/>\n    `;const E=[0,4289374890,4283782485,4278190080],S=this.dbgTilesCanvas.width,A=this.dbgTilesCanvas.height,T=this.dbgTilesCtx.createImageData(S,A),D=new Uint32Array(T.data.buffer);for(let e=0;e<384;e++){const t=32768+16*e,s=8*e%S,r=8*Math.floor(e/(S/8));for(let e=0;e<8;e++){const n=this.memoryMap.read8(t+2*e),a=this.memoryMap.read8(t+2*e+1);for(let t=0;t<8;t++){const i=E[(n>>7-t&1)+((a>>7-t&1)<<1)];D[(r+e)*S+s+t]=i}}}this.dbgTilesCtx.putImageData(T,0,0)},this.memoryMap=new se,this.cpu=new Z(this.memoryMap),this.gpu=new q(this.memoryMap,e),this.apu=new ce(this.memoryMap),this.joypad=new te(this.memoryMap),this.joypad.init(),this.gpu.tick(),this.dbgA=document.getElementById("dbg_a"),this.dbgF=document.getElementById("dbg_f"),this.dbgAF=document.getElementById("dbg_af"),this.dbgB=document.getElementById("dbg_b"),this.dbgC=document.getElementById("dbg_c"),this.dbgBC=document.getElementById("dbg_bc"),this.dbgD=document.getElementById("dbg_d"),this.dbgE=document.getElementById("dbg_e"),this.dbgDE=document.getElementById("dbg_de"),this.dbgH=document.getElementById("dbg_h"),this.dbgL=document.getElementById("dbg_l"),this.dbgHL=document.getElementById("dbg_hl"),this.dbgPC=document.getElementById("dbg_pc"),this.dbgSP=document.getElementById("dbg_sp"),this.dbgJoypad=document.getElementById("dbg_joypad"),this.dbgSound1=document.getElementById("dbg_sound1"),this.dbgSound2=document.getElementById("dbg_sound2"),this.dbgSound3=document.getElementById("dbg_sound3"),this.dbgSound4=document.getElementById("dbg_sound4"),this.dbgTilesCanvas=document.getElementById("dbg_tiles"),this.dbgTilesCtx=this.dbgTilesCanvas.getContext("2d"),this.dbgOam=document.getElementById("dbg_oam"),this.dbgLcdC=document.getElementById("dbg_lcdc"),this.dbgSerial=document.getElementById("dbg_serial")}togglePause(){return this.isPaused=!this.isPaused,this.isPaused&&this.isAudioEnabled?this.apu.pause():this.isAudioEnabled&&this.apu.resume(),this.isPaused}enableAudio(){this.isAudioEnabled=!0,this.apu.resume()}disableAudio(){this.isAudioEnabled=!1,this.apu.pause()}setVolume(e){this.apu.setVolume(e/100)}loadCart(e){console.log("load cart"),this.memoryMap.loadCart(e),this.cpu.reset(),this.isAudioEnabled&&this.apu.resume(),this.isRunning=!0,this.animationFrameRequest&&window.cancelAnimationFrame(this.animationFrameRequest),this.animationFrameRequest=requestAnimationFrame(this.update)}}!function(){const e=document.getElementById("game"),t=document.getElementById("pause"),s=document.getElementById("sound"),r=document.getElementById("volume"),n=document.getElementById("screen"),a=new oe(n);t.addEventListener("click",(e=>{const t=a.togglePause();e.target.innerHTML=t?"Resume":"Pause"})),e.addEventListener("change",(async t=>{const s=t.target.files;if(s&&s.length>0){const e=await s[0].arrayBuffer();a.loadCart(e)}e.blur()})),s.addEventListener("change",(e=>{e.target.checked?a.enableAudio():a.disableAudio()})),r.addEventListener("change",(e=>{a.setVolume(parseInt(e.target.value,10))})),console.log("Starting...")}()}();
//# sourceMappingURL=index.8d6b4f44.js.map
